import { OnInit, Component, Input, HostListener, NgZone, AfterViewInit } from '@angular/core';
import * as PIXI from 'pixi.js';
import { Enemy } from './models/enemy.model';
import { DeviceDetectorService } from 'ngx-device-detector';

export enum KEY_CODE {
  RIGHT_ARROW = "ArrowRight",
  LEFT_ARROW = "ArrowLeft",
  SPACE = " "
}
@Component({
  selector: 'app-shooter',
  templateUrl: './shooter.component.html',
  styleUrls: ['./shooter.component.scss']
})

export class ShooterComponent implements OnInit, AfterViewInit {

  static readonly routeName: string = 'games/shooter';

  public app: PIXI.Application;
  public isGameStarted: boolean = false;
  private player: any;
  private playerSpeed = 3;
  private keys: { [key: string]: boolean } = {};

  private bullets = [];
  private bulletSpeed = 7;
  private bullet: any;
  private bulletTimer;
  private fireCounter = 0;
  private fireSpeed = 2;

  private enemies = [];
  private enemySpeed = 1;
  private enemy: any;
  private generateEnemySpeed = 1000;
  private maxEnemySize = 40;

  private scoreTable: any;
  private score = 0;

  private isGameOver = false;


  private shouldRender = true;

  private gameBgPlayingMusic = new Audio();
  public hasSound = true;

  // mute and unmute icons
  public mute = "assets/media/icons/game/mute.png";
  public unmute = "assets/media/icons/game/volume.png";

  // alien images
  private alien_r_fud = "data:image/png;base64,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";
  private alien_y_fud = "data:image/png;base64,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";
  private alien_g_fud = "data:image/png;base64,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";
  private alien_b_fud = "data:image/png;base64,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";

  private alien_r_whale = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAQAAAAC6CAYAAABBVJPBAAAACXBIWXMAAAguAAAILgHhOGQRAAAAGXRFWHRTb2Z0d2FyZQB3d3cuaW5rc2NhcGUub3Jnm+48GgAACkdJREFUeJzt3VuMXVUdx/HvXDrTO9PSCyW0VKgtUGgxCtZ6Q0AQA2LBB5BAoqDBmIjRJhoIdBqJD9oHSoCgiTyIohKppkQxBUMJUjBAaSu03KXQSkun0+n93u1DaZkzl3Nmz5w1Z878v59kHvaetf57nXX2+WX2mX3WgSqVwfwMskQ/qyv9+FReGaxOeL7Mr/Tj663aSg9AUuUYAFJgBoAUmAEgBWYASIEZAFJgBoAUmAEgBWYASIEZAFJgBoAUmAEgBWYASIEZAFJgBoAUmAEgBWYASIEZAFJgBoAUmAEgBWYASIEZAFJgNRksT1h/fg28kKJwBpOB01PUBpqAHyaqDTCvBrYlrF91MhgD/CXhIe4C2hLVfqsG3ktROINPAYtS1D52gFRrpWcZXJJs4AllMDvxvEys9GMcaDKYmHjOZ1f6MfZGBpeknBcvAaTADAApMANACswAkAIzAKTADAApMANACswAkAIzAKTADAApMANACswAkAIzAKTADAApMANACswAkAIzAKTADAApMANACswAkAIzAKTA6oGnEtY/mKpwBnNJt+pwLWnn5XtZutptHF3WvNpqQ9o5vzqDeYlqL6uBFYlqHyThvNQDX0xVHBiSsPZcYEGi2q8D0xPVBpgJjEtUewVH56baareQbk4AJpHuOd1FugAYQsLXqJcAUmAGgBSYASAFZgBIgRkAUmAGgBSYASAFZgBIgRkAUmAGgBSYASAFZgBIgRkAUmAGgBSYASAFZgBIgRkAUmAGgBSYASAFZgBIgRkAUmD1wOqE9adkcEGi2sNJN/YtwPuJasPRed+YqHYb6eZlW8Lau4BXEtWGo8tr701Ue3jC83wKKV+jGWQJf15MWHt5wtopQ5EMNicc+zNVWntz4jlfXaXnYsrXUOYlgBSYASAFZgBIgRkAUmAGgBSYASAFZgBIgRkAUmAGgBSYASAFZgBIgRkAUmAGgBSYASAFZgBIgRkAUmAGgBSYASAFZgBIgRkAUmAGgBSYASAFVl/pAQxQQzPIEtZvSVi7WtUmnvPXE9auWv4FIAVmAEiBGQBSYAaAFJgBIAVWlf8F2E89v+aTE8cU+bLXabQyhw256q6niaeZwh6GjB7OwS7bfI53mUrb8e2NjOZJphatO4cNTKM111he5GTWMa5om6/zKiM5kKvu35jONobm6vMV3mQce3L16ehtxrCCyd3+/iC1jRfzXyazvU/H6crDzKSNod0+p321jWFdnouz2MystN952mdVGQDbaeQHXHZGsTY3sjJ3AKxgMtdzFcBJ3bX5PY8UBMBKJh3r061f82juAPgds7iLOUXbvMndjMxZ91YuYg0Tc/V5ht/0OQCeYirf5spiTUY9wp+SBMB3+Bo7aOz2OS2DLs/FBSwf8AHgJYAUmAEgBWYASIEZAFJgBoAUmAEgBWYASIEZAFJgBoAUmAEgBVaVtwKrZzYwmlu4rGDfek4o2J7HOq7jP8e3WxjOzVxe0OY2LmIse9lB44zR7Ocy3uAmVqYbeD87ky38jCd73b+NoWub2HdWx/1nsaVP4+oPBsAgtoNGlnBm0TbT2crVrD2+vZ6mTm2Wf/RhpxMBJrGzXEMcEMaxp2AOemHgv9K74SWAFJgBIAVmAEiB1QNfSlj/u0BduYseorYemFmszS4aWoH38tTdRUMTcGqJNu8C245t76ZhNPCxEn02AFvb7doNbCzWZycNJwPji7XZT9066LQiSBuwGmAf9UOBGSWO8wHw/rHtA9Q1QPE3DnbS0EKJ8Xe0i4axUGRFkKNt3oHyLwhwmJqzKXIe7qV+N/BmHw6xkw/nPIHXgB8nqk19DSxPVTyDW4HZ5a5bz5GSbUZyYCwwNk/dnqyuM5IDU4Apx7ZH9KzPKcAp7Xa1QPHlfkb1oG4jh7t6oe7mwzkfyqGSNUZxYAIw4dh2A4d70mccJcbfUQ/ndmqemj1VV+LrBoZxaAR9O0/b+ti/mA9Svka9BJACMwCkwAwAKTADQArMAJACC3Mr8B6GMILbCvYt5Q9cwWsVGlH53c6F3MkX5hZrs4r7mcWm49s1HX5/Km0coblg32e5kWfb/QfvXs7nXs4/vn0ie2jhF70fuComTABknU71tN9FXQk9fTydZyLf7zsfN28PDRReAkiBGQBSYAaAFJgBIAVmAEiBGQBSYAaAFJgBIAVmAEiBDdo7AdfTxF854/j2/i4e6r85hSPt7mJ7gZOTjGUVJxWM5SC1DUNKLGryFmOSjEWdbWV4wfOTVxtDxzWxj4t5u0cLnwwkgzYAnuA0nuC0om1+zuf7ZSz3cR73cV77XaP75cDqkbWMZx7X9KXETIBXuYcZtJRnUP3ESwApMANACswAkAJL/R7Ag8CKchdtZdgIYH656/bEK4xfAh99md46xk8Hrq3EWDYy+u7TaT2+RPlaxl8Ixd/YeIcx989m0+Y8x9nEyBspXNW4wF7q90LxBQFeZsK5wJXF2qxl/MNXsW5dnrH1xH7qfgo0lrtuR+9xwj0zaNlaumUub5W5XoEq/SB38wQg10lcRtdB80MfbS68ArKllRlK3TS4vd0J0nwndFj1pJPac+GOnGvYN68APlOkQSs0n1i8xsJvQfZAiQNdDc1L8o2tJ5q30y9vvNadAbdX1QozXgJIgRkAUmAGgBSYASAFZgBIgQ3aW4EHmAeAp3L2+SZwafmHcuROaN5Wul2BaeUfx8AxgxZu5ele91/JpD8uZs5jcPj90q0HFgOgX9Q8Bwt+m69P8ydIEgBcnqBmVZvAbm7ow7d738DqFxfzj5zP78DgJYAUmAEgBWYASIEZAFJgBoAUmAEgBWYASIEZAFJgBoAUmAEgBRbmVuDhHGQTiwr2XcM3+Dsfr9CIKqV2LjS+nK/P3seBTycZjioqTAAAjGJ/wXZdiS/nGKT2wE925uvSHHKiIvASQArMAJACS3oJkMEsYGy56y7jwaZLuT5XnyPUHIHCD33voPFsoMRqthrsdtGwHVjVhxIHMrigTMPpqLUG1iSqnfw9gEXAl8td9Fw25e6zj/p9NZ2epKlLgSvKMihVrZeYtKbzudFz2dHzfHH5RlTgceCSRLW9BJAiMwCkwAwAKTADQArMAJACG8x3Av4PWNtue28XbVYBw9ptTwTOSTkoFTULFua8S7Gjmha446WcnZpgYa//W/UrHj31NDqvtH46rXS1fyAZzAHwGDTfVLxJ8x2F2wuvheyhrtuqHyyArI8lsseAr+bsdA5ky3p7xJu7WWl9ActpZnlvy/YLLwGkwAwAKTADQArMAJACMwCkwAwAKTADQArMAJACMwCkwAwAKbCqvBV4FAe4hef+uZg5S4o0W1vkd93Inge+X7xN3fMdttfAoRJ9av+Vfyy1f4YjbxRvc3hLhx1LOfoZiCLqN+QfS80vIZtUpMG+0jWyZyk5t+VQs76LfT+CrDHVEW/huaums/WijvvPK/VUDHYZLMsgS/SzqPQIpPQyWJTwPO/1ZxR6wksAKTADQArMAJAC+z+1mcKurFSoAwAAAABJRU5ErkJggg==";
  private alien_y_whale = "data:image/png;base64,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";
  private alien_g_whale = "data:image/png;base64,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";
  private alien_b_whale = "data:image/png;base64,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";

  private alien_r_dip = "data:image/png;base64,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";
  private alien_y_dip = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAQAAAAC6CAYAAABBVJPBAAAACXBIWXMAAAguAAAILgHhOGQRAAAAGXRFWHRTb2Z0d2FyZQB3d3cuaW5rc2NhcGUub3Jnm+48GgAACDNJREFUeJzt3U2MVXcZgPHnwMwIDCWU1s4Q7JelKLaBRomJmNh2Iaa1NqE1VjQu/Ii2xhgTkIVRGXTjArVq0oUutGJtok2atlIbGlPYEBNJZUiAiKL4QYEywPAxfMwgfxdTowvuHTjnvh0m7/NLZnXu/z1nDnOfzLnMPRemqFJYUwol6Gtwsr8/dVYpDAb+vKyZ7O+vrmmTfQCSJo8BkBIzAFJiBkBKzABIiRkAKTEDICVmAKTEDICUmAGQEjMAUmIGQErMAEiJGQApMQMgJWYApMQMgJSYAZASMwBSYgZASswASIkZACmxqhS2BM5fU1VsjxhcCjcCt0XMBuYCXwmaDbCyqjgeOH/KKYVrgWcDd/E4MBw0e19V8c+IwaWwDNgQMfu/O4i6V3ophRVhBx6oFJYGn5e+yf4erzal0Bd8zpdO9vdYRymsiDwvXgJIiRkAKTEDICVmAKTEDICUmAGQEjMAUmIGQErMAEiJGQApMQMgJWYApMQMgJSYAZASMwBSYgZASswASIkZACkxAyAlZgCkxAyAlFgXsDVw/ljU4FJYDmF3HZ5G7Hl5rJSw2cOM39Z8qs2G2HP+cCmsDJq9uarYFjR7jMDz0gXcHTUc6A6cvRxYFzR7L7AoaDbAHcD1QbO3MX5uptrsIeLOCcB84v5NT0NYALoJfI56CSAlZgCkxAyAlJgBkBIzAFJiBkBKzABIiRkAKTEDICVmAKTEDICUmAGQEjMAUmIGQErMAEiJGQApMQMgJWYApMQMgJSYAZASMwBSYl3AYOD8m0rhnqDZs4g79iPAwaDZMH7eDwTNHibuvBwPnH0a2BU0G8Zvr302aPaswJ/zmwh8jnYBS6OGA48B7w6avZW4Y99ZVXHnpRQOAzcEjR8h7rxEzn69qugLmk0pDAJLgsYPA+uDZr9K4HPUSwApMQMgJWYApMQMgJSYAZASMwBSYgZASswASIkZACkxAyAlZgCkxAyAlJgBkBIzAFJiBkBKzABIiRkAKTEDICVmAKTEDICUmAGQEjMAUmJdk30AV6kZpVAC5w8Fzp6qpgWf872Bs6csfwOQEjMAUmIGQErMAEiJGQApsSn5vwDn/w0/3k7ftTNj5p8ZY86s7nprZ3bDw4s7ezxX4qc7uK47KOvD53jr3Bkxs7un0/PIHa23/+skbNlff36Tf9OJHD/b/mfxrn64M+qjYBuakgE4cQ6+/BLvDNxFf92Ffb2TG4CvbubWo1Efgg23Rw3un83sdgF49SB86tlmu2i0ur22P4vfuvfqDYCXAFJiBkBKzABIiRkAKTEDICVmAKTEDICUmAGQEjMAUmIGQErMAEiJTcn3AjT19Q/At+9t+5C9wKJWG9/2PThw6tLbDo9Atb714Ptvh02fuJyjrGdoLduB5XXWvrAXHny6/r5fWAUPtDxrEzoGXF9/7+39+mMc+OhiFkTM/tkOdn36OVq+k+Gbr4x/tfLiJ+G+hRFHNjF/A5ASMwBSYgZASqwLaH813MzngemdHnrhIl3Q+pprIqdGOQwcavOQY0DLd9WPXeRdQK3bS4yMcZLx1xgO1Fl/GYaBwToLR0aZA9xad8cjo/wNOFl3OW3OyemGx3buAkcJuh37hYuMNVk/MspfgRavKvEnYHWT+e10VRVbooaXwteApZ2e29Xw95ZreugD+to8pO2LgE3uuNPbzZw3Zke94DVCzXPe29Nsx7099Z+gjD85W56T2Q2PbUYX10HMi4Bd09jVZH1vD29vs/n1yOeolwBSYgZASswASIkZACkxAyAlZgCkxFK+F6CpH90PI6OX3nbiPHzpxdZrdxyCR57hmlb/lfjQ4vEv6c1gAGpY2eZjIA6dbh+A107Br3bxllbbb5tnAPTm8RJASswASIkZACkxAyAlZgCkxAyAlJgBkBIzAFJiBkBKzABIiRkAKTEDICVmAKTEot8NuBHY1umhx87SC6xpsP7vwP52DwFqfUjW0Blm0+A2zruPsBUa3QV2GHi5zsI9QywCVtXd8Z4hnn5gEXtrLh8FWt77d88R3gF8vOZsTp3nH8Bf6q5v5/hZTtPgNvV7hnjqvoUtj21f3bmXIzQAVcXGkMED3ECDAMybyc3AzW0esrOqeKjW8AH6aRCAZ3aztaoYqLu+kfV8hAYBWPsyv1z7fn7TwSP6nwEepEEAenuYD9zSseP5PyfP82ST9as389Tq9/HbTh3PlfASQErMAEiJGQApMQMgJWYApMQMgJSYAZASMwBSYn4ugFL4zHPc+MWYP1Hi1OiEf6D0HeC7Lbf2c6KjB3QFDIBSGBll+kjc+JYf9AJAxRnWMRS3+/q8BJASMwBSYgZASswASIkZACkxAyAlZgCkxAyAlJgBkBIzAFJi/ilwHQMMAHNbbJ01werdwE/abP99nUNSe6vu5Nh7FzAvYvYfD/L8z3fySssHlM7fGbtTQgNQCkug8yd98z7mfugX9ddfxm3BJ7p99OeABTV3v58BHq+5VjXdfQvbv/CeCf5mv77fPbmSnW22z2Id99Scfayq2s5uJPo3gA3ABzs99K7+Zuuf+AMbn/gw3+jM0WgqeHQTP3x0GZsiZpfCBuAHEbMZ/4yHFUGzfQ1AyswASIkZACkxAyAlZgCkxAyAlJgBkBIzAFJiBkBKLOt7AeYzwLIG67vbbLsADLbZ/ucG+53YAEuAnpqrFzbc+8IG53WUgbg/edWlZQ3AZ9/4inC0YVyaegmYX2tlabzv7zdY+xr131+hmrwEkBIzAFJiBkBKzABIiRkAKTEDICVmAKTEDICUmAGQEjMAUmIGQErsP+Tt9KfKdT3EAAAAAElFTkSuQmCC";
  private alien_g_dip = "data:image/png;base64,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";
  private alien_b_dip = "data:image/png;base64,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";

  private images = [
    this.alien_r_fud, this.alien_y_fud, this.alien_g_fud, this.alien_b_fud,
    this.alien_r_whale, this.alien_y_whale, this.alien_g_whale, this.alien_b_whale,
    this.alien_r_dip, this.alien_y_dip, this.alien_g_dip, this.alien_b_dip
  ];

  //Sounds 
  private laserSound = "assets/media/sounds/games/shooter/matrixxx__retro-laser-shot-04.mp3";
  private explosionSound = "assets/media/sounds/games/shooter/matrixxx__retro-explosion-07.mp3";
  private boomSound = "assets/media/sounds/games/shooter/cabled-mess__boom-c-06.mp3";
  private boomSound2 = "assets/media/sounds/games/shooter/owlstorm__retro-video-game-sfx-explode-3.mp3";
  private levelUpSound = "assets/media/sounds/games/shooter/noisecollector__level2.mp3";
  private spawnSound = "assets/media/sounds/games/shooter/owlstorm__retro-video-game-sfx-blast-off.mp3";
  private gameMusic = "assets/media/sounds/games/shooter/sawsquarenoise-stage-3.mp3";

  @Input()
  public devicePixelRatio = window.devicePixelRatio || 1;

  @Input()
  public applicationOptions: PIXI.IApplicationOptions = {
    backgroundAlpha: 0,
    antialias: true,
    resolution: this.devicePixelRatio,
    autoDensity: true,
  };

  constructor(private ngZone: NgZone, private deviceService: DeviceDetectorService) { }

  ngAfterViewInit(): void {
    document.addEventListener("visibilitychange", (e) => {
      this.shouldRender = document.hidden ? false : true;
    });
  }

  ngOnInit(): void {
    this.init();
  }

  init() {
    this.ngZone.runOutsideAngular(() => {
      this.app = new PIXI.Application(this.applicationOptions);
      //preload assets
      this.app.loader.baseUrl = "assets/media/icons/game";
      this.app.loader
        .add("bullet", "bullet.png")
        .add("player", "player.png")

      this.app.loader.onProgress.add((e) => this.showProgress(e));
      this.app.loader.onComplete.add(() => this.doneLoading());
      this.app.loader.onError.add((e) => this.reportError(e));

      this.app.loader.load();

      document.getElementById('pixi-container').appendChild(this.app.view);
      this.scoreTable = document.querySelector("#scoreTable");
      this.scoreTable.textContent = 'Score : ' + this.score;

    });



    this.resize();

    if (this.shouldRender) this.onRender();

    // Detecting device motion
    window.addEventListener("devicemotion", this.onDeviceTilt.bind(this));
    document.addEventListener("touchend", this.fireBulletMobile.bind(this));

  }

  onRender(): void {
    this.app.view.style.transformOrigin = `top left`;
    this.gameBgMusic(this.gameMusic);
    this.generateEnemy();
    this.repositionAssets();
    this.app.ticker.add(() => this.gameLoop());
  }

  repositionAssets(): void {
    if (this.player !== undefined) {
      // move the sprite to the center of the screen
      this.player.x = this.app.screen.width / 2;
      this.player.y = this.app.screen.height - this.player.height;
    }
  }

  soundOnOff() {
    this.hasSound = !this.hasSound;

    // Game music
    this.gameBgMusic(this.gameMusic);
  }

  @HostListener('window:resize')
  public resize() {
    const width = document.getElementById('pixi-container').offsetWidth;
    const height = document.getElementById('pixi-container').offsetHeight;
    const viewportScale = 1 / this.devicePixelRatio;

    this.app.renderer.resize(
      width * viewportScale,
      height * viewportScale
    );
    // this.app.view.style.transform = `scale(${viewportScale})`;
    this.app.view.style.width = `100%`;
    this.app.view.style.height = `100%`;

    this.repositionAssets();
  }

  onDeviceTilt(event: DeviceMotionEvent) {

    switch (screen.orientation.type) {
      case "portrait-primary":
        if (this.player.x >= this.player.width / 2 && ((this.player.x + this.player.width / 2) <= this.app.screen.width)) {
          this.player.x -= event.accelerationIncludingGravity.x;
          if (this.player.x < this.player.width / 2 || ((this.player.x + this.player.width / 2) > this.app.screen.width)) {
            this.player.x += event.accelerationIncludingGravity.x;
          }
        }
        break;
    }

  }

  isPlayerAvailable() {
    return this.player !== undefined && this.player.visible;
  }

  @HostListener('window:keyup', ['$event'])
  keyUpEvent(event: KeyboardEvent) {
    this.keys[event.key] = false;
  }

  @HostListener('window:keydown', ['$event'])
  keyDownEvent(event: KeyboardEvent) {
    this.keys[event.key] = true;
  }

  ngOnDestroy(): void {
    this.app.destroy();
  }

  showProgress(e: object): void {
    //console.log(e.progress);
  }

  doneLoading(): void {
    // * creating player object
    this.createPlayer();
    // If it is mobile do new prefernces
    this.IsMobile();
  }

  reportError(e: any): void {
    console.log(typeof e);

    console.log("ERROR : " + e.message);
  }

  IsMobile() {
    if (this.deviceService.isMobile()) {
      this.maxEnemySize = 25;
      this.bulletSpeed = 5;
      this.fireSpeed = 1.2;
      this.player.height = 20;
      this.player.width = 20;
    }
  }

  startGame(): void {
    setTimeout(() => {
      this.player.visible = true;
    }, 1000)

    // removing all enemies
    this.removeAllEnemies();
    this.isGameStarted = true;
  }

  gameLoop() {
    // ignore when player is not visible
    if (!this.isPlayerAvailable()) return;

    // Detecting key press
    this.detectMovement();
    // Updating bullet position
    this.updateBullet();
    // Updating enemy position
    this.updateEnemy();
    // Checking score for updating level
    if (this.deviceService.isMobile()) {
      this.updateLevelForMobile();
    } else {
      this.updateLevel();
    }
    // Checking collision of between enemy and shooter
    this.gameOver();
    // Detecting hitting the enemy
    this.detectShootingEnemy();
    // Restart game
    this.restartGame();
  }

  detectMovement() {

    if (this.keys[KEY_CODE.LEFT_ARROW] && (this.player.x > this.player.width / 2)) {
      this.player.x -= 5;
    }

    if (this.keys[KEY_CODE.RIGHT_ARROW] && (this.player.x < this.app.screen.width - this.player.width / 2)) {
      this.player.x += 5;
    }

    if (this.keys[KEY_CODE.SPACE] && (this.fireCounter / 10 > 2)) {
      this.fireBullet();
      this.fireCounter /= 10;
    } else {
      this.fireCounter += this.fireSpeed;
    }

  }

  fireBullet() {
    if (this.player.visible) {
      let tempBullet = this.createBullet();
      this.bullets.push(tempBullet);
      this.playAudio(this.laserSound);
    }
  }

  fireBulletMobile() {
    this.fireCounter += this.fireSpeed;
    if (this.fireCounter / 10 > 2) {
      this.fireBullet();
      this.fireCounter /= 10;
    }
    /* 
     clearTimeout(this.bulletTimer);
    this.bulletTimer = setTimeout(() => { this.fireBullet(); }, 150);
    */

  }

  createBullet(): any {
    this.bullet = PIXI.Sprite.from(this.app.loader.resources.bullet.texture);
    this.bullet.anchor.set(0.5);
    this.bullet.height = 12;
    this.bullet.width = 12;
    this.bullet.x = this.player.x;
    this.bullet.y = this.player.y - this.bullet.height;
    this.bullet.speed = this.bulletSpeed;
    this.app.stage.addChild(this.bullet);

    return this.bullet;
  }

  updateBullet() {
    for (let index = 0; index < this.bullets.length; index++) {
      this.bullets[index].position.y -= this.bullets[index].speed;

      if (this.bullets[index].position.y < -200) {
        this.app.stage.removeChild(this.bullets[index]);
        this.bullets.splice(index, 1);
      }
    }
  }

  createEnemy(): any {
    let randomImageIndex = Math.floor(Math.random() * this.images.length - 2) + 1;
    let enemyModel = new Enemy(
      this.images[randomImageIndex + 1],
      0.5, this.enemySpeed,
      this.app.screen.width
    );

    this.enemy = enemyModel.createEnemy(this.maxEnemySize);

    this.app.stage.addChild(this.enemy);
    randomImageIndex = 0;
    return this.enemy;
  }

  generateEnemy(): void {
    this.enemies.push(this.createEnemy());

    setTimeout(() => { this.generateEnemy() }, this.generateEnemySpeed);
    clearTimeout();
  }

  updateEnemy() {
    for (let index = 0; index < this.enemies.length; index++) {
      // if the browser tab isn't focussed, then ignore this part
      this.enemies[index].position.y += this.enemies[index].speed;

      //Diagonal movement
      if (this.score >= 1000) {
        if (this.enemies[index].diagonal >= 0.5) {
          if (this.enemies[index].position.y > this.app.screen.height / 2)
            this.enemies[index].position.x -= 0.5;
          else
            this.enemies[index].position.x += 0.5;
        } else {
          if (this.enemies[index].position.y > this.app.screen.height / 2)
            this.enemies[index].position.x += 0.5;
          else
            this.enemies[index].position.x -= 0.5;
        }
      }

      if (this.enemies[index].position.y > this.app.screen.height + 30) {
        this.app.stage.removeChild(this.enemies[index]);
        this.enemies.splice(index, 1);
      }
    }
  }

  collision(a: any, b: any) {
    if (a === undefined || b === undefined)
      return false;

    let aBox = a.getBounds();
    let bBox = b.getBounds();

    return ((((aBox.x >= bBox.x) && (aBox.x <= bBox.x + bBox.width)) || ((aBox.x + aBox.width >= bBox.x) && (aBox.x + aBox.width <= bBox.x + bBox.width))) || (((bBox.x >= aBox.x) && (bBox.x <= aBox.x + aBox.width)) || ((bBox.x + bBox.width >= aBox.x) && (bBox.x + bBox.width <= aBox.x + aBox.width)))) &&
      (aBox.y < bBox.y + bBox.height && aBox.y > bBox.y);

  }

  detectShootingEnemy(): void {

    for (let i = 0; i < this.bullets.length; i++) {

      for (let j = 0; j < this.enemies.length; j++) {
        if (this.collision(this.bullets[i], this.enemies[j])) {

          this.enemies[j].live--;
          this.playAudio(this.boomSound);

          if (this.enemies[j].live <= 0) {

            this.score += this.enemies[j].point;
            this.scoreTable.textContent = 'Score : ' + Math.floor(this.score);

            this.app.stage.removeChild(this.enemies[j]);
            this.enemies.splice(j, 1);

            this.app.stage.removeChild(this.bullets[i]);
            this.bullets.splice(i, 1);

            this.playAudio(this.boomSound2);

          } else {
            this.app.stage.removeChild(this.bullets[i]);
            this.bullets.splice(i, 1);
          }
        }
      }
    }
  }

  updateLevel() {
    if (this.score >= 1000) {
      this.enemySpeed = 3;
      this.generateEnemySpeed = 400;
    } else if (this.score >= 900) {
      this.enemySpeed = 2.7;
      this.generateEnemySpeed = 500;
    } else if (this.score >= 800) {
      this.enemySpeed = 2.4;
      this.generateEnemySpeed = 550;
    } else if (this.score >= 700) {
      this.enemySpeed = 2.1;
      this.generateEnemySpeed = 600;
    } else if (this.score >= 600) {
      this.enemySpeed = 1.8;
      this.generateEnemySpeed = 650;
    } else if (this.score >= 500) {
      this.enemySpeed = 1.5;
      this.generateEnemySpeed = 700;
    }
  }

  updateLevelForMobile() {
    if (this.score >= 1000) {
      this.enemySpeed = 2.5;
      this.generateEnemySpeed = 450;
    } else if (this.score >= 900) {
      this.enemySpeed = 2.3;
      this.generateEnemySpeed = 500;
    } else if (this.score >= 800) {
      this.enemySpeed = 2.1;
      this.generateEnemySpeed = 550;
    } else if (this.score >= 700) {
      this.enemySpeed = 1.9;
      this.generateEnemySpeed = 600;
    } else if (this.score >= 600) {
      this.enemySpeed = 1.7;
      this.generateEnemySpeed = 650;
    } else if (this.score >= 500) {
      this.enemySpeed = 1.5;
      this.generateEnemySpeed = 700;
    }
  }

  gameOver() {
    for (let i = 0; i < this.enemies.length; i++) {
      if (this.collision(this.player, this.enemies[i]) && this.player.visible) {
        this.player.visible = false;
        this.isGameOver = true;
        this.playAudio(this.explosionSound);
      }
    }
  }

  restartGame() {
    if (this.isGameOver) {
      this.isGameOver = false;
      this.score = 0;
      this.enemySpeed = 1;
      this.generateEnemySpeed = 1000;
      this.scoreTable.textContent = 'Score : ' + this.score;

      setTimeout(() => {
        // removing all enemies
        this.removeAllEnemies();
        // reactivating player
        this.player.visible = true;
        this.player.anchor.set(0.5);
        this.player.x = this.app.screen.width / 2;
        this.player.y = this.app.screen.height - this.player.height;

        this.playAudio(this.spawnSound);
      }, 2000);
    }
  }

  removeAllEnemies(): void {
    // removing all enemies
    for (let i = 0; i < this.enemies.length; i++) {
      this.app.stage.removeChild(this.enemies[i]);
    }
    this.enemies = [];
  }

  createPlayer() {
    this.player = PIXI.Sprite.from(this.app.loader.resources.player.texture);
    this.player.anchor.set(0.5);
    this.player.height = 30;
    this.player.width = 30;
    this.player.x = this.app.screen.width / 2;
    this.player.y = this.app.screen.height - this.player.height;
    this.player.speed = this.playerSpeed;
    this.player.visible = false;
    this.app.stage.addChild(this.player);
  }

  playAudio(sound: string) {
    let audio = new Audio();
    audio.src = sound;
    audio.loop = false;
    if (this.hasSound) {
      audio.load();
      audio.play();
    }
  }

  gameBgMusic(sound: string) {
    this.gameBgPlayingMusic.src = sound;
    this.gameBgPlayingMusic.loop = true;
    this.gameBgPlayingMusic.load();
    if (this.hasSound) {
      this.gameBgPlayingMusic.play();
    } else {
      this.gameBgPlayingMusic.pause();
    }
  }

}
